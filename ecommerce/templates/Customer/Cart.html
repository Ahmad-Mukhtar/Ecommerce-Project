<!doctype html>
{% load static %}
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Shopping Hut</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="shortcut icon" type="image/x-icon" href="https://themebeyond.com/html/geco/Geco/img/favicon.png">
        <!-- Place favicon.ico in the root directory -->

		<!-- CSS here -->
        <link rel="stylesheet" href="https://themebeyond.com/html/geco/Geco/css/bootstrap.min.css">
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        <link rel="stylesheet" href="{% static 'css/admin.css' %}">
        <link rel="stylesheet" href="https://themebeyond.com/html/geco/Geco/css/responsive.css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">

 </head>
    <body id="body-pd">
        <header class="header" id="header">
            <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
            <div class="header_img">
                <i class="nav_logo-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                    <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                    <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
                    </svg>
                </i>
            </div>
        </header>
        <div class="l-navbar neonBox-red" id="nav-bar">
            <nav class="nav">
                <div>
                    <a href="{% url 'DashBoard' %}" class="nav_logo">
                        <i class='bx bx-home-alt nav_logo-icon'></i> <span class="nav_logo-name">Customer Panel</span>
                    </a>
                    <div class="nav_list">
                        <a href="{% url 'DashBoard' %}" class="nav_link active">
                            <div class="icons-temp">
                                <i class='bx bx-grid-alt nav_icon'></i>
                            </div>
                            <span class="nav_name">Dashboard</span>
                        </a>
                        <a href="{% url 'UpdateProfile' %}" class="nav_link">
                            <div class="icons-temp">
                                <i class='bx bx-user nav_icon'></i>
                            </div>
                            <span class="nav_name">Update Information</span>
                        </a>
                        <a href="{% url 'Categories' %}" class="nav_link">
                            <div class="icons-temp">
                                <i class='bx bx-grid-alt nav_icon'></i>
                            </div>
                            <span class="nav_name">Display Categories</span>

                        </a>


                        <a href="{% url 'manageorders' %}" class="nav_link">
                            <div class="icons-temp">
                                <i class='fa fa-shopping-cart'></i>
                            </div>
                            <span class="nav_name">View Orders</span>
                        </a>

                        <a href="{% url 'DeleteAccount' %}" class="nav_link">
                            <div class="icons-temp">
                                <i class='bx bx-user nav_icon'></i>
                            </div>
                            <span class="nav_name">Delete Account</span>
                        </a>

                    </div>
                </div>  <a href="{% url 'logout' %}" class="nav_link">
                            <div class="icons-temp">
                                <i class='bx bx-log-out nav_icon'></i>
                            </div>
                            <span class="nav_name">Log Out</span>
                        </a>
            </nav>
        </div>

        <!--Container Main start-->
        <div class="mainArea" style="color: black;">
            <div class="container">
                <div style="text-align: right;">

                </div>
                </div>
            <section id="top" style=" padding-bottom:120px;  color: #000000; font-style: normal;">
        <div class="container">
            <div class="row" style="margin-top: 118px;">
                <div class="col-md-2">

                </div>
                <div class="col-md-8">

                    <h1 style="  text-align:center; color: black; "> Shopping Cart Summary</h1>




                </div>
                <div class="col-md-2">

                </div>
            </div>
            <div class="row pro" style=" margin-bottom: 50px;  margin-top:50px;  ">
                <div class="col-md-2">

                </div>
                <div class="col-md-2">
                    <h4 style="color: black"> Product</h4>
                </div>
                <div class="col-md-2">
                    <h4 style="color: black"> Price</h4>
                </div>
                <div class="col-md-2">

                    <div class="input-group">

                        <h4 style="color: black;">Quantity</h4>

                    </div>


                </div>
                <div class="col-md-2">

                    <h4 style="color: black;">SubTotal</h4>
                </div>
                <div class="col-md-2">

                </div>
            </div>
            <hr style="height:2px;border-width:0;color:gray;background-color:gray">
{% for product in cartproducts %}
            <div class="row get_product" id="cart_products" style=" margin-bottom: 50px;  margin-top:50px;  ">

                <div class="col-md-2">

                </div>
                <div class="col-md-2">
                    <h6 style="color: black;margin-left: -50px;overflow: auto;">{{product.prodname}}</h6>
                </div>
                <div class="col-md-2">
                    <h6 style="color: black;margin-left: 8px;" >{{product.getprice}}</h6>
                    <input hidden value="{{product.getprice}}" name="{{product.prodid}}">
                </div>
                <div class="col-md-2" style="display:flex;">

<button type="submit" class="point" style="background-color: #2b75ff;/* color: #2b75ff; */border-radius: 37px;color: white;border:none;padding: 3px 16px;/* padding-top: 10px; *//* padding-bottom: 10px; */margin-right: 14px;margin-left: -16px;" value="{{product.prodid}}" onclick="subval(this)"><b>-</b></button>
                    <input type="number" id="{{product.prodid}}"  name="quantity" class="form-control input-number" style="margin-left: -8px;width: auto;font-size: 10px;" value="1" min="1" max="100" disabled="">
<button type="submit"  ID="addbtn" class="point" style="background-color: #2b75ff;/* color: #2b75ff; */border-radius: 37px;color: white;border:none;padding: 3px 16px;/* padding-top: 10px; *//* padding-bottom: 10px; */margin-right: 39px;margin-left: 6px;" onclick="addval(this)" value="{{product.prodid}}"><b>+</b></button>
                </div>
                <div class="col-md-2">
                    <h6 id="subtotal{{product.prodid}}"  style="color: black;margin-left: 34px;">{{product.getprice}}</h6>
                </div>
                <div>
                     <form action="removefromcart" method="post">
                    {% csrf_token %}
         <input hidden value="{{product.prodid}}" name="productid">
    <button type="submit" class="point" value="{{product.prodid}}" style="background-color: #2b75ff;/* color: #2b75ff; */border-radius: 29px;color: white;border:none;padding: 3px 16px;/* padding-top: 10px; *//* padding-bottom: 10px; */margin-right: 20px;margin-left: -41px;" onclick="subval(this)"><b>Remove From Cart</b></button>
                </form>
                </div>

            </div>
             {% endfor%}

            <hr style="height:2px;border-width:0;color:gray;background-color:gray">

            <div class="row" style=" margin-bottom: 50px;  margin-top:70px;">
                <div class="col-md-2" style="color: red; margin-top: -51px;">
                    <small id="errormsg" style="color: red;font-size: larger;font-weight: bold;font-style: italic; display:none;">*Cart is Empty</small>

                </div>
                <div class="col-md-4" style="text-align:right">

                </div>
                <div class="col-md-4" style="text-align:right">

        <button type="submit" class="point" style=" background-color: #2b75ff; color: #2b75ff; border-radius: 5px; color: white; border:none; padding: 40px; padding-top: 10px; padding-bottom: 10px; margin-right:40px;" onclick="checkout(this)"><b>Proceed to Checkout</b></button>
                </div>



            </div>

            <div class="row get_product_rates" style=" margin-bottom: 50px;  margin-top:50px;  ">

                <div class="col-md-6">

                </div>

                <div class="col-md-4">
                    <div style="display:flex;">
                    <h5 style="margin-bottom:20px; color: black;">SUBTOTAL</h5>
                    <h5 style="margin-bottom:20px; margin-left:200px; color: black;" id="totalsum">{{Totalsum}}</h5>
                    </div>

                     <div style="display:flex;">
                    <h5 style="margin-bottom:20px; color: black;">SHIPPING</h5>
                    <h5 style="margin-bottom:20px; margin-left:210px; color: black;">50</h5>
                    </div>
                    <hr style="height:2px;border-width:0;color:gray;background-color:gray">

                    <div style="display:flex;">
                    <h5 style="margin-bottom:20px; color: black;">TOTAL</h5>
                    <h5 style="margin-bottom:20px; margin-left:240px; color: black;" id="totalsumwithshipp">{{Sumwithshipping}}</h5>
                    </div>

                    <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                </div>

            </div>


        </div>
    </section>



                <br><br><br><br>


            </div>
            <br><br>

<script>
const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});


const data = {
  labels: [
    'Eating',
    'Drinking',
    'Sleeping',
    'Designing',
    'Coding',
    'Cycling',
    'Running'
  ],
  datasets: [{
    label: 'My First Dataset',
    data: [65, 59, 90, 81, 56, 55, 40],
    fill: true,
    backgroundColor: 'rgba(255, 99, 132, 0.2)',
    borderColor: 'rgb(255, 99, 132)',
    pointBackgroundColor: 'rgb(255, 99, 132)',
    pointBorderColor: '#fff',
    pointHoverBackgroundColor: '#fff',
    pointHoverBorderColor: 'rgb(255, 99, 132)'
  }, {
    label: 'My Second Dataset',
    data: [28, 48, 40, 19, 96, 27, 100],
    fill: true,
    backgroundColor: 'rgba(54, 162, 235, 0.2)',
    borderColor: 'rgb(54, 162, 235)',
    pointBackgroundColor: 'rgb(54, 162, 235)',
    pointBorderColor: '#fff',
    pointHoverBackgroundColor: '#fff',
    pointHoverBorderColor: 'rgb(54, 162, 235)'
  }]
};

const ctx1 = document.getElementById('myChart1').getContext('2d');
const myChart1 = new Chart(ctx1, {
type: 'radar',
  data: data,
  options: {
    elements: {
      line: {
        borderWidth: 3
      }
    }
  },
});
</script>

        <!--Container Main end-->
        <!-- main-area-end -->


		<!-- JS here -->
        <script>
    function addval(button)
    {

            inputvalue=document.getElementById(button.value)
            if(parseInt(inputvalue.value)<5)
            {
                price_value=document.getElementsByName(button.value)[0].value
                inputvalue.value=(parseInt(inputvalue.value)+1).toString(10)
                Totalvalue=parseInt(document.getElementById("subtotal"+button.value).innerHTML)+parseInt(price_value)
                document.getElementById("subtotal"+button.value).innerHTML=Totalvalue.toString(10)
                total_sum=parseInt(document.getElementById("totalsum").innerHTML)
                document.getElementById("totalsum").innerHTML=(total_sum+parseInt(price_value)).toString(10)
                document.getElementById("totalsumwithshipp").innerHTML=(total_sum+parseInt(price_value)+50).toString(10)
            }


    };

    function subval(btn)
    {
            inputval=document.getElementById(btn.value)
            quantity=parseInt(inputval.value)
            if (quantity>1)
            {
                inputval.value=(parseInt(inputval.value)-1).toString(10)
                price_value=document.getElementsByName(btn.value)[0].value
                Totalvalue=parseInt(document.getElementById("subtotal"+btn.value).innerHTML)-parseInt(price_value)
                document.getElementById("subtotal"+btn.value).innerHTML=Totalvalue.toString(10)
                total_sum=parseInt(document.getElementById("totalsum").innerHTML)
                document.getElementById("totalsum").innerHTML=(total_sum-parseInt(price_value)).toString(10)
                 document.getElementById("totalsumwithshipp").innerHTML=(total_sum-parseInt(price_value)+50).toString(10)

            }

    };


    function checkout(btnn)
    {
        element_arr=document.querySelectorAll(".form-control")
        if (element_arr.length!=0)
        {
        var d = new Date();
        d.setTime(d.getTime() + (3600*1000));
        var expires = "expires=" + d.toUTCString();
        var s = "cartprodts";
        var ids=""
        for (var i=0; i<element_arr.length; i++)
        {
            ids=ids+element_arr[i].id+','
        }
        ids=ids+','+document.getElementById("totalsumwithshipp").innerHTML
        console.log(ids)
        document.cookie = s + "=" + ids + ";" + expires + ";path=/checkout";
        var url="{% url 'checkout' %}";
        document.location.href =url
        }
        else
        {
        element=document.getElementById("errormsg")
        element.style.display="block";





        }
    }
</script>
        <script src="https://themebeyond.com/html/geco/Geco/js/bootstrap.min.js"></script>
        <script src="{% static 'js/product.js' %}"></script>

    </body>
</html>